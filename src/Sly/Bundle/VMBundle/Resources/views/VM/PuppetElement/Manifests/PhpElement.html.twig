system::package { "php5":
    ensure => installed,
}

file { "php5-ini-apache2-config":
    path    => "/etc/php5/apache2/php.ini",
    ensure  => "/vagrant/files/php/php.ini",
    require => Package["php5"],
}

file { "php5-ini-cli-config":
    path    => "/etc/php5/cli/php.ini",
    ensure  => "/vagrant/files/php/php-cli.ini",
    require => Package["php5"],
}

system::package { [ "php5-common", "php5-dev" ]:
    ensure  => installed,
    require => Package["php5"]
}

{% for phpModule in vm.phpModules %}
system::package { "{{ phpModule }}":
    ensure  => installed,
    require => Package["php5"]
}
{% endfor %}

{% if vm.mysql and vm.phpMyAdmin %}
system::package { "phpmyadmin":
    require => Package["php5"]
}
{% endif %}
