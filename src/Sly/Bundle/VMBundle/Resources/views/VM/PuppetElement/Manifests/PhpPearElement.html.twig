class { "pear": }

pear::channel { "phpunit":
    url => "pear.phpunit.de",
}

pear::channel { "symfony2":
    url     => "pear.symfony.com",
    require => Exec["pear-channel-phpunit"],
}

pear::channel { "symfony1":
    url     => "pear.symfony-project.com",
    require => Exec["pear-channel-symfony2"],
}

pear::channel { "components":
    url     => "components.ez.no",
    require => Exec["pear-channel-symfony1"],
}

{% if 'phpunit' in vm.phpPearComponents | keys %}
pear::module { "phpunit":
    channel_name => "phpunit",
    package_name => "PHPUnit",
    dir_source   => "PHPUnit",
    require      => Exec["pear-channel-components"],
}
{% endif %}

{% if 'phpcodesniffer' in vm.phpPearComponents | keys %}
pear::module { "php_code_sniffer":
    package_name => "PHP_CodeSniffer",
    dir_source   => "PHP/CodeSniffer",
    require      => Class["pear"],
}
{% endif %}
